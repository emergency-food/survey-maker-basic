(this["webpackJsonpsurvey-maker"]=this["webpackJsonpsurvey-maker"]||[]).push([[0],{51:function(e,t,a){e.exports=a(66)},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),c=a.n(l),i=a(11),s=a(22),u=a(7),o=a(73),d={en:"English",es:"Espa\xf1ol"},m=a(19),b=a(27),f=a(14),y=Object(b.b)({name:"settings",initialState:{locale:"en"},reducers:{settingsUpdateLocale:function(e,t){return Object(f.a)(Object(f.a)({},e),{},{locale:t.payload})}}}),v=y.actions.settingsUpdateLocale,p=y.reducer,E=a(35),h=a(80),O=a(79),g=a(70),j=a(45),x=a(71),k=a(72),w=new(a(44).Chance)(350287),S=new Date,C=Object(g.a)(S),D=function(){var e=w.natural({max:25});console.log("Generating ".concat(e," surveys with the following seed... ").concat(w.seed));for(var t={},a=0;a<e;a++){var n=w.date({year:C}),r=Object(j.a)(n,w.natural({max:100})),l=Object(x.a)(n,w.natural({max:25}));t[w.guid()]={title:w.company(),tsCreated:Object(h.a)(Object(k.a)(l)?S:l),tsUnlock:Object(h.a)(n),tsExpiry:Object(h.a)(r)}}return t}(),I=Object(b.b)({name:"surveys",initialState:D,reducers:{surveysCreateOne:function(e,t){var a=t.payload,n=a.title,r=a.tsUnlock,l=a.tsExpiry;return Object(f.a)(Object(f.a)({},e),{},Object(E.a)({},Object(O.a)(),{title:n,tsCreated:Object(h.a)(new Date),tsUnlock:Object(h.a)(r),tsExpiry:Object(h.a)(l)}))},surveysDeleteOne:function(e,t){var a=Object(f.a)({},e);return delete a[t.payload.surveyId],a},surveysClearAll:function(){return{}}}}),F=I.actions,M=F.surveysCreateOne,V=F.surveysDeleteOne,T=F.surveysClearAll,L=I.reducer,R=Object(m.c)({settings:p,surveys:L}),q=Object(b.a)({reducer:R}),U=function(e){return e},N=function(e){return e.settings},J=function(e){return e.surveys},A=function(){var e=Object(i.c)(U);return n.createElement("pre",null,JSON.stringify(e,null,2))},P=a(8),B=function(e){var t=e.labelText,a=e.children;return n.createElement("label",{style:{display:"block",marginTop:24}},n.createElement("div",{style:{marginBottom:8}},t),a)};var _=function(){var e=Object(o.a)().formatMessage,t=Object(u.g)(),a=Object(i.c)(N).locale,r=Object(i.b)(),l=function(e){var t=e.labelId,a=e.options,r=e.initialValue,l=Object(o.a)().formatMessage,c=n.useState(r),i=Object(P.a)(c,2),s=i[0],u=i[1];return{selectedValue:s,selectField:n.createElement(B,{labelText:l({id:t})},n.createElement("select",{onChange:function(e){return u(e.currentTarget.value)},value:s},Object.entries(a).map((function(e){var t=Object(P.a)(e,2),a=t[0],r=t[1];return n.createElement("option",{key:a,value:a},r)}))))}}({labelId:"settings.locale",options:d,initialValue:a}),c=l.selectedValue,s=l.selectField;return n.useEffect((function(){r(v(c))}),[r,c]),n.createElement(n.Fragment,null,n.createElement("h2",{style:{display:"flex"}},n.createElement("button",{onClick:function(){return t.push("/")}},e({id:"arrow-left"})),n.createElement("span",{style:{marginLeft:16}},e({id:"settings"}))),s,n.createElement("button",{onClick:function(){return r(T())},style:{marginTop:16}},e({id:"settings.clear-surveys"})),n.createElement("hr",null),n.createElement(A,null))},G=a(74),z=function(){var e=Object(u.g)();return n.createElement("h1",{style:{display:"flex"}},n.createElement("div",{style:{flexGrow:1}},n.createElement(G.a,{id:"app-name"})),n.createElement("button",{onClick:function(){return e.push("/settings")}},n.createElement(G.a,{id:"settings"})))},W=a(75),$=a(46),H=function(e){var t=e.isRequired,a=e.isDisabled,r=n.useState(),l=Object(P.a)(r,2),c=l[0],i=l[1],s=n.useState(),u=Object(P.a)(s,2),o=u[0],d=u[1],m=n.useState(),b=Object(P.a)(m,2),f=b[0],y=b[1];return{inputValue:c,inputField:n.createElement("input",{type:"date",required:t,disabled:a,min:o?Object(h.a)(o,{representation:"date"}):void 0,max:f?Object(h.a)(f,{representation:"date"}):void 0,value:void 0===c?"":Object(h.a)(c,{representation:"date"}),onChange:function(e){var t=Object(W.a)(e.target.value);Object($.a)(t)&&i(t)}}),setMinDate:d,setMaxDate:y}},K=function(){return function(e){var t=e.labelId,a=e.isRequired,r=e.isDisabled,l=e.allowPast,c=Object(o.a)().formatMessage,i=H({isRequired:a,isDisabled:r}),s=i.inputValue,u=i.inputField,d=i.setMinDate,m=i.setMaxDate,b=H({isRequired:a,isDisabled:r||void 0===s}),f=b.inputValue,y=b.inputField,v=b.setMinDate;n.useEffect((function(){l||d(new Date)}),[l,d]),n.useEffect((function(){m(f)}),[f,m]),n.useEffect((function(){v(s)}),[v,s]);var p=n.createElement(B,{labelText:c({id:t})},u,n.createElement("span",{style:{margin:"0 8px"}},c({id:"arrow-right"})),y);return{startDate:s,endDate:f,dateRangeInput:p}}({labelId:"create-survey.date-range-label",allowPast:!1,isRequired:!0,isDisabled:!1})},Q=function(){var e=function(e){var t=e.labelId,a=e.isRequired,r=Object(o.a)().formatMessage,l=n.useState(),c=Object(P.a)(l,2),i=c[0],s=c[1];return{inputValue:i,inputField:n.createElement(B,{labelText:r({id:t})},n.createElement("input",{type:"text",value:i||"",required:a,onChange:function(e){return s(e.target.value)}}))}}({labelId:"create-survey.title-label",isRequired:!0});return{titleValue:e.inputValue,titleInput:e.inputField}},X=function(){var e=Object(o.a)().formatMessage,t=Object(u.g)(),a=Object(i.b)(),r=n.useState(!1),l=Object(P.a)(r,2),c=l[0],s=l[1],d=Q(),m=d.titleValue,b=d.titleInput,f=K(),y=f.dateRangeInput,v=f.startDate,p=f.endDate;n.useEffect((function(){s(!1)}),[m,v,p]);return n.createElement(n.Fragment,null,n.createElement("h2",{style:{display:"flex"}},n.createElement("button",{onClick:function(){return t.push("/")}},e({id:"arrow-left"})),n.createElement("span",{style:{marginLeft:16}},e({id:"create-survey.header"}))),n.createElement("form",{onSubmit:function(e){if(e.preventDefault(),void 0===m||void 0===v||void 0===p)return s(!0);a(M({title:m,tsUnlock:v,tsExpiry:p})),t.push("/list-surveys")}},b,y,n.createElement("div",{style:{marginTop:32}},n.createElement("button",{type:"submit"},e({id:"create-survey.submit"}))),c&&n.createElement("div",{style:{color:"red"}},e({id:"create-survey.generic-error"}))))},Y=a(41),Z=a.n(Y),ee=a(48),te=a(78),ae=function(){return n.createElement("div",null,"Loading...")},ne=function(e){switch(e){case"es":return a.e(4).then(a.t.bind(null,81,3));default:return a.e(3).then(a.t.bind(null,82,3))}},re=function(e){var t=e.children,a=Object(i.c)(N).locale,r=n.useState(),l=Object(P.a)(r,2),c=l[0],s=l[1];return n.useEffect((function(){Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(a);case 2:t=e.sent,s(t.default);case 4:case"end":return e.stop()}}),e)})))()}),[a]),c?n.createElement(te.a,{messages:c,locale:a,defaultLocale:"en",onError:function(e){if("MISSING_TRANSLATION"!==e.code)throw e}},t):n.createElement(ae,null)};var le=a(77),ce=function(e){var t=e.survey,a=Object(i.b)();return"new"===t.status?n.createElement("button",{onClick:function(){a(V({surveyId:t._id}))}},n.createElement(G.a,{id:"list-surveys.action-delete-label"})):null},ie=a(76),se=function(){var e=Object(o.a)().formatMessage;return{new:e({id:"survey-status.new"}),"in-progress":e({id:"survey-status.in-progress"}),completed:e({id:"survey-status.completed"})}},ue={border:"solid 1px black",padding:8},oe=["list-surveys.title-header","list-surveys.status-header","list-surveys.actions-header","list-surveys.creation-date-header","list-surveys.unlock-date-header","list-surveys.expiry-date-header"],de=function(){return n.createElement("tr",null,n.createElement("td",{colSpan:oe.length,style:ue},n.createElement(G.a,{id:"list-surveys.empty-table"})))},me=function(e){var t=e.survey,a=Object(o.a)().formatMessage,r=se(),l=a({id:"em-dash"}),c=t.title,i=t.tsCreated,s=t.tsUnlock,u=t.tsExpiry,d=t.status,m=t.visibility,b=n.useState(l),f=Object(P.a)(b,2),y=f[0],v=f[1],p=n.useState(l),E=Object(P.a)(p,2),h=E[0],O=E[1],g=n.useState(l),j=Object(P.a)(g,2),x=j[0],k=j[1],w=n.useCallback((function(){v(Object(le.a)(i,{addSuffix:!0})),O(Object(le.a)(s,{addSuffix:!0})),k(Object(le.a)(u,{addSuffix:!0}))}),[i,u,s]);n.useEffect((function(){w();var e=setInterval(w,1e3);return function(){return clearInterval(e)}}),[i,w]);var S={visibility:"hide"===m?"collapse":"visible"};return"deemphasize"===m&&(S.opacity=.15,S.backgroundColor="lightgrey"),n.createElement("tr",{style:S},n.createElement("td",{style:ue},c),n.createElement("td",{style:ue},r[d]),n.createElement("td",{style:ue},n.createElement(ce,{survey:t})),n.createElement("td",{style:ue},y),n.createElement("td",{style:ue},h),n.createElement("td",{style:ue},x))},be=function(e){var t=e.surveys,a=Object(o.a)().formatMessage;return n.createElement("table",{style:{border:"solid 1px black",borderCollapse:"collapse"}},n.createElement("thead",null,n.createElement("tr",null,oe.map((function(e,t){return n.createElement("th",{key:t,style:ue},a({id:e}))})))),n.createElement("tbody",null,t.length>0?t.map((function(e){return n.createElement(me,{key:e._id,survey:e})})):n.createElement(de,null)))},fe=function(e){var t=e.hideFiltered,a=e.hiddenStatuses,n=Object(i.c)(J),r=t?"hide":"deemphasize";return Object.entries(n).map((function(e){var t=Object(P.a)(e,2),n=t[0],l=t[1],c=l.title,i=l.tsCreated,s=l.tsUnlock,u=l.tsExpiry,o=Object(W.a)(s),d=Object(W.a)(u),m=function(e,t){return Object(ie.a)(t)?"completed":Object(ie.a)(e)?"in-progress":"new"}(o,d),b="show";return a&&function(e,t){return!!t&&t.includes(e)}(m,a)&&(b=r),{_id:n,title:c,tsCreated:Object(W.a)(i),tsUnlock:o,tsExpiry:d,status:m,visibility:b}}))},ye=function(e,t,a){var r=JSON.stringify(a);return function(){var a=Object(u.h)(),l=Object(u.g)(),c=new URLSearchParams(a.search);try{var i=c.get(t);if(null===i)throw new Error('Cannot find a value for "'.concat(t,'" in the query-parameters; resetting to the default value (').concat(r,")!"));var s=JSON.parse(i);return n.createElement(e,{parameterValue:s,updateParameterValue:function(e){c.set(t,JSON.stringify(e)),l.push("".concat(a.pathname,"?").concat(c.toString()))}})}catch(o){return console.warn(o),c.set(t,r),n.createElement(u.a,{to:{pathname:a.pathname,search:c.toString()}})}}}((function(e){var t=e.parameterValue,a=e.updateParameterValue,r=Object(u.g)(),l=fe(t),c=function(e,t){var a=Object(o.a)().formatMessage,r=se(),l=new Set(e.hiddenStatuses);return{statusFilterView:n.createElement("div",null,n.createElement("h5",{style:{marginBottom:8}},a({id:"list-surveys.status-filter-header"})),Object.entries(r).map((function(a){var r=Object(P.a)(a,2),c=r[0],i=r[1],s=c;return n.createElement("div",{key:c},n.createElement("label",{style:{display:"inline-block"}},n.createElement("input",{type:"checkbox",onChange:function(){l.has(s)?l.delete(s):l.add(s),t(Object(f.a)(Object(f.a)({},e),{},{hiddenStatuses:Array.from(l)}))},checked:l.has(s)}),n.createElement("span",{style:{marginLeft:8}},i)))})))}}(t,a).statusFilterView,i=function(e,t){var a=Object(o.a)().formatMessage;return{hideFilteredItemsToggle:n.createElement("label",{style:{display:"inline-block",margin:"16px 0"}},n.createElement("input",{type:"checkbox",checked:e.hideFiltered||!1,onChange:function(){t(Object(f.a)(Object(f.a)({},e),{},{hideFiltered:!e.hideFiltered}))}}),n.createElement("span",{style:{marginLeft:8}},a({id:"list-surveys.hide-filtered-items-label"})))}}(t,a).hideFilteredItemsToggle;return n.createElement(n.Fragment,null,n.createElement("h2",{style:{display:"flex"}},n.createElement(G.a,{id:"list-surveys.header"}),n.createElement("button",{style:{marginLeft:16},onClick:function(){r.push("/create-survey")}},n.createElement(G.a,{id:"create-survey.header"}))),c,i,n.createElement(be,{surveys:l}))}),"display",{});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:q},r.a.createElement(re,null,r.a.createElement(s.a,null,r.a.createElement("div",{style:{fontFamily:"sans-serif"}},r.a.createElement(z,null),r.a.createElement("hr",null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/settings"},r.a.createElement(_,null)),r.a.createElement(u.b,{exact:!0,path:"/create-survey"},r.a.createElement(X,null)),r.a.createElement(u.b,{exact:!0,path:"/list-surveys"},r.a.createElement(ye,null)),r.a.createElement(u.b,{path:"*"},r.a.createElement(u.a,{to:"/list-surveys"})))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.7b225a1d.chunk.js.map